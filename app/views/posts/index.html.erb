<div class="row">
  <div class="col-md-3">
    <!-- Search and Filters -->
    <div class="card mb-4">
      <div class="card-header">
        <h5 class="mb-0"><i class="fas fa-search"></i> Search & Filters</h5>
      </div>
      <div class="card-body">
        <%= search_form_for @q, url: posts_path, method: :get do |f| %>
          <div class="mb-3">
            <%= f.label :title_or_body_cont, "Search Posts", class: "form-label" %>
            <%= f.search_field :title_or_body_cont, class: "form-control", placeholder: "Search by title or content..." %>
          </div>
          
          <% if user_signed_in? %>
            <div class="mb-3">
              <%= f.label :filter, "Filter", class: "form-label" %>
              <%= f.select :filter, options_for_select([
                ['All Posts', ''],
                ['My Posts', 'my_posts']
              ], params[:filter]), {}, class: "form-select" %>
            </div>
          <% end %>
          
          <div class="mb-3">
            <label class="form-label">Date Range</label>
            <div class="row">
              <div class="col-6">
                <input type="date" name="start_date" value="<%= params[:start_date] %>" class="form-control" placeholder="Start Date">
              </div>
              <div class="col-6">
                <input type="date" name="end_date" value="<%= params[:end_date] %>" class="form-control" placeholder="End Date">
              </div>
            </div>
          </div>
          
          <div class="d-grid">
            <%= f.submit "Search", class: "btn btn-primary" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  
  <div class="col-md-9">
    <!-- Posts List -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Blog Posts</h2>
      <% if user_signed_in? %>
        <%= link_to new_post_path, class: "btn btn-success" do %>
          <i class="fas fa-plus"></i> New Post
        <% end %>
      <% end %>
    </div>
    
    <% if @posts.any? %>
      <div class="row">
        <% @posts.each do |post| %>
          <div class="col-md-6 mb-4">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <%= link_to post.title, post_path(post), class: "text-decoration-none" %>
                </h5>
                <p class="card-text text-muted">
                  <%= post.preview %>
                </p>
                <div class="d-flex justify-content-between align-items-center">
                  <small class="text-muted">
                    <i class="fas fa-user"></i> <%= post.user.display_name %>
                  </small>
                  <small class="text-muted">
                    <i class="fas fa-comments"></i> <%= post.comment_count %> comments
                  </small>
                </div>
              </div>
              <div class="card-footer">
                <small class="text-muted">
                  <i class="fas fa-calendar"></i> <%= post.created_at.strftime("%B %d, %Y") %>
                </small>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      
      <!-- Pagination -->
      <div class="d-flex justify-content-center">
        <%= paginate @posts %>
      </div>
    <% else %>
      <div class="text-center py-5">
        <i class="fas fa-newspaper fa-3x text-muted mb-3"></i>
        <h4 class="text-muted">No posts found</h4>
        <p class="text-muted">Try adjusting your search criteria or create a new post.</p>
      </div>
    <% end %>
  </div>
</div>
